<!DOCTYPE html>

<head>
	<script>
		function setStatus(id, status){
			var req = new XMLHttpRequest();
			req.open("POST", "setstatus");
			req.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
			req.send(id + "=" + status);
		}
	</script>
</head>

{{$kaikki := .}}

<body>
	<a href="logout">Kirjaudu ulos</a>
	<h1>Oppimateriaali</h1>
	{{range $aihe := .Aiheet}}
	<div style="background-color: {{index $kaikki.TilojenVÃ¤rit $aihe.Tila}}">
		<h2>{{$aihe.Nimi}}</h2>
		{{range $i, $nimi := $kaikki.TilojenNimet}} {{if ne $i $aihe.Tila}}
		<button onclick="setStatus({{$aihe.Id}}, {{$i}})">{{$nimi}}</button>
		{{end}}{{end}}
	</div>
	{{end}}
</body>